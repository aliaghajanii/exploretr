//
//  HistoryViewController.swift
//  Explore Turkey: Cappadocia
//
//  Created by ali aghajani on 9/26/19.
//  Copyright © 2019 ali aghajani. All rights reserved.
//

import UIKit

class HistoryViewController: UIViewController {
    
    
    
    
    
    let historyText: String = "Cappadocia was known as Hatti in the late Bronze Age, and was the homeland of the Hittite power centred at Hattusa. After the fall of the Hittite Empire, with the decline of the Syro-Cappadocians (Mushki) after their defeat by the Lydian king Croesus in the 6th century, Cappadocia was ruled by a sort of feudal aristocracy, dwelling in strong castles and keeping the peasants in a servile condition, which later made them apt to foreign slavery. It was included in the third Persian satrapy in the division established by Darius but continued to be governed by rulers of its own, none apparently supreme over the whole country and all more or less tributaries of the Great King.\n\nKingdom of Cappadocia\nAfter ending the Persian Empire, Alexander the Great tried to rule the area through one of his military commanders. But Ariarathes, a Persian aristocrat, somehow became king of the Cappadocians. As Ariarathes I (332–322 BC), he was a successful ruler, and he extended the borders of the Cappadocian Kingdom as far as to the Black Sea. The kingdom of Cappadocia lived in peace until the death of Alexander. The previous empire was then divided into many parts, and Cappadocia fell to Eumenes. His claims were made good in 322 BC by the regent Perdiccas, who crucified Ariarathes; but in the dissensions which brought about Eumenes's death, Ariarathes II, the adopted son of Ariarathes I, recovered his inheritance and left it to a line of successors, who mostly bore the name of the founder of the dynasty.\nPersian colonists in the Cappadocian kingdom, cut off from their co-religionists in Iran proper, continued to practice Zoroastrianism. Strabo, observing them in the first century BC, records (XV.3.15) that these 'fire kindlers' possessed many 'holy places of the Persian Gods', as well as fire temples. Strabo furthermore relates, were 'noteworthy enclosures; and in their midst there is an altar, on which there is a large quantity of ashes and where the magi keep the fire ever burning.' According to Strabo, who wrote during the time of Augustus (r. 63 BC–14 AD), almost three hundred years after the fall of the Achaemenid Persian Empire, there remained only traces of Persians in western Asia Minor; however, he considered Cappadocia 'almost a living part of Persia'.\nUnder Ariarathes IV, Cappadocia came into relations with Rome, first as a foe espousing the cause of Antiochus the Great, then as an ally against Perseus of Macedon. The kings henceforward threw in their lot with the Republic as against the Seleucids, to whom they had been from time to time tributary. Ariarathes V marched with the Roman proconsul Publius Licinius Crassus Dives Mucianus against Aristonicus, a claimant to the throne of Pergamon, and their forces were annihilated (130 BC). The imbroglio which followed his death ultimately led to interference by the rising power of Pontus and the intrigues and wars which ended in the failure of the dynasty.\n\nRoman and Byzantine province\nThe Cappadocians, supported by Rome against Mithridates VI of Pontus, elected a native lord, Ariobarzanes, to succeed (93 BC); but in the same year Armenian troops under Tigranes the Great entered Cappadocia, dethroned king Ariobarzanes and crowned Gordios as the new client-king of Cappadocia, thus creating a buffer zone against the encroaching Romans. It was not until Rome had deposed the Pontic and Armenian kings that the rule of Ariobarzanes was established (63 BC). In the civil wars Cappadocia was first for Pompey, then for Caesar, then for Antony, and finally, Octavian. The Ariobarzanes dynasty came to an end, a Cappadocian nobleman Archelaus was given the throne, by favour first of Antony and then of Octavian, and maintained tributary independence until AD 17, when the emperor Tiberius, whom he had angered, summoned him to Rome and reduced Cappadocia to a Roman province.\nCappadocia contains several underground cities (see Kaymaklı Underground City). The underground cities have vast defence networks of traps throughout their many levels. These traps are very creative, including such devices as large round stones to block doors and holes in the ceiling through which the defenders may drop spears.\n\nEarly Christian and Byzantine periods\nn 314, Cappadocia was the largest province of the Roman Empire, and was part of the Diocese of Pontus. In 371, the western part of the Cappadocia province was divided into Cappadocia Prima, with its capital at Caesarea (modern-day Kayseri); and Cappadocia Secunda, with its capital at Tyana. By 386, the region to the east of Caesarea had become part of Armenia Secunda, while the northeast had become part of Armenia Prima. Cappadocia largely consisted of major estates, owned by the Roman emperors or wealthy local families. The Cappadocian provinces became more important in the latter part of the 4th century, as the Romans were involved with the Sasanian Empire over control of Mesopotamia and 'Armenia beyond the Euphrates'. Cappadocia, now well into the Roman era, still retained a significant Iranian character; Stephen Mitchell notes in the Oxford Dictionary of Late Antiquity: 'Many inhabitants of Cappadocia were of Persian descent and Iranian fire worship is attested as late as 465'.\nThe Cappadocian Fathers of the 4th century were integral to much of early Christian philosophy. It also produced, among other people, another Patriarch of Constantinople, John of Cappadocia, who held office 517–520. For most of the Byzantine era it remained relatively undisturbed by the conflicts in the area with the Sassanid Empire, but was a vital frontier zone later against the Muslim conquests. From the 7th century, Cappadocia was divided between the Anatolic and Armeniac themes. In the 9th–11th centuries, the region comprised the themes of Charsianon and Cappadocia.\nCappadocia shared an always-changing relationship with neighbouring Armenia, by that time a region of the Empire. The Arab historian Abu Al Faraj asserts the following about Armenian settlers in Sivas, during the 10th century: 'Sivas, in Cappadocia, was dominated by the Armenians and their numbers became so many that they became vital members of the imperial armies. These Armenians were used as watch-posts in strong fortresses, taken from the Arabs. They distinguished themselves as experienced infantry soldiers in the imperial army and were constantly fighting with outstanding courage and success by the side of the Romans in other words Byzantine'. As a result of the Byzantine military campaigns and the Seljuk invasion of Armenia, the Armenians spread into Cappadocia and eastward from Cilicia into the mountainous areas of northern Syria and Mesopotamia, and the Armenian Kingdom of Cilicia was eventually formed. This immigration was increased further after the decline of the local imperial power and the establishment of the Crusader States following the Fourth Crusade. To the crusaders, Cappadocia was 'terra Hermeniorum,' the land of the Armenians, due to the large number of Armenians settled there.\n\nTurkish Cappadocia\n Following the Battle of Manzikert in 1071, various Turkish clans under the leadership of the Seljuks began settling in Anatolia. With the rise of Turkish power in Anatolia, Cappadocia slowly became a tributary to the Turkish states that were established to the east and to the west; some of the population was forcibly converted to Islam with the remainder forming the Cappadocian Greek population. By the end of the early 12th century, Anatolian Seljuks had established their sole dominance over the region. With the decline and the fall of the Konya-based Seljuks in the second half of the 13th century, they were gradually replaced by the Karaman-based Beylik of Karaman, who themselves were gradually succeeded by the Ottoman Empire over the course of the 15th century. Cappadocia remained part of the Ottoman Empire for the centuries to come, and remains now part of the modern state of Turkey. A fundamental change occurred in between when a new urban center, Nevşehir, was founded in the early 18th century by a grand vizier who was a native of the locality (Nevşehirli Damat İbrahim Pasha), to serve as regional capital, a role the city continues to assume to this day. In the meantime many former Cappadocians had shifted to a Turkish dialect (written in Greek alphabet, Karamanlıca), and where the Greek language was maintained (Sille, villages near Kayseri, Pharasa town and other nearby villages), it became heavily influenced by the surrounding Turkish. This dialect of Greek is known as Cappadocian Greek. Following the 1923 population exchange between Greece and Turkey, the language is now only spoken by a handful of the former population's descendants in modern Greece."
    
    
    
    let profileView: UIView = {
        let mv = UIView()
        mv.layer.cornerRadius = 15
        mv.layer.shadowColor   = UIColor.black.cgColor
        mv.layer.shadowOffset  = CGSize(width: 0.5, height: 6.0)
        mv.layer.shadowRadius  = 15
        mv.layer.shadowOpacity = 0.8
        mv.clipsToBounds       = false
        mv.translatesAutoresizingMaskIntoConstraints = false
        return mv
    }()
    
    fileprivate var inProfileView: UIView = {
        let mv = UIView()
        mv.layer.cornerRadius = 65
        mv.clipsToBounds       = true
        mv.layer.masksToBounds = true
        mv.translatesAutoresizingMaskIntoConstraints = false
        return mv
    }()
    
    let BackgroundProfileImageView: UIImageView = {
        let hi = UIImageView()
        hi.contentMode = .scaleAspectFill
        hi.image = UIImage(named: "svdsvsvdsvds")
        hi.clipsToBounds = true
        hi.layer.cornerRadius = 65
        hi.translatesAutoresizingMaskIntoConstraints = false
        return hi
    }()
    
    fileprivate var upperView: UIView = {
        var uv = UIView()
        uv.translatesAutoresizingMaskIntoConstraints = false
        return uv
    }()
    
    
    let backgroundImageView: UIImageView = {
        let hi = UIImageView()
        hi.image = UIImage(named: "sbabsajsbj")
        hi.contentMode = .scaleAspectFill
        hi.clipsToBounds = true
        hi.alpha = 0.85
        hi.translatesAutoresizingMaskIntoConstraints = false
        return hi
    }()
    
    let sectiontitleLabel: UILabel = {
        let nl = UILabel()
        nl.adjustsFontSizeToFitWidth = true
        nl.text = "Cappadocia's History"
        nl.font = UIFont(name: "Futura-CondensedExtraBold", size: 28)
        nl.textAlignment = .center
        nl.textColor = .white
        nl.translatesAutoresizingMaskIntoConstraints = false
        return nl
    }()
    
    fileprivate var lowerView: UIView = {
        var lv = UIView()
        lv.translatesAutoresizingMaskIntoConstraints = false
        return lv
    }()
    
    fileprivate let textBackView: UIView = {
        let db = UIView()
        db.layer.cornerRadius = 15
        db.backgroundColor = colors.customBlackHighlited
        db.translatesAutoresizingMaskIntoConstraints = false
        return db
    }()
    
    fileprivate var descriptionBackView: UIView = {
        let db = UIView()
        db.backgroundColor = colors.textHighlight
        db.translatesAutoresizingMaskIntoConstraints = false
        return db
    }()
    
    
    
    let backButton: UIButton = {
        let cb = UIButton()
        cb.setTitle("<", for: .normal)
        cb.titleLabel?.font = UIFont(name: "Futura-CondensedExtraBold", size: 20)
        cb.setTitleColor(.white, for: .normal)
        cb.addTarget(self, action: #selector(handleDismiss), for: .touchUpInside)
        cb.layer.cornerRadius = 20
        cb.backgroundColor = colors.customBlackHighlited
        cb.translatesAutoresizingMaskIntoConstraints = false
        return cb
    }()
    
    lazy var descriptionLabel: UITextView = {
        let hl = UITextView()
        hl.font = UIFont(name: "Futura-CondensedExtraBold", size: 16)
        hl.textAlignment = .left
        hl.text = historyText
        hl.textColor = .white
        hl.isEditable = false
        hl.isScrollEnabled = true
        hl.isUserInteractionEnabled = true
        hl.backgroundColor = .clear
        hl.translatesAutoresizingMaskIntoConstraints = false
        return hl
    }()
    
    //MARK: - Inits
    
    override func viewDidLoad() {
        super.viewDidLoad()
        configureUi()
        setupConstraint()
        
    }
    
    //MARK: - Handlers
    
    @objc func handleDismiss() {
        dismiss(animated: true)
    }
    
    
    
}

extension HistoryViewController {
    
    func configureUi() {
        
    }
    
    func setupConstraint() {
        
        view.addSubview(backgroundImageView)
        NSLayoutConstraint.activate([
            backgroundImageView.topAnchor.constraint(equalTo: view.topAnchor),
            backgroundImageView.leadingAnchor.constraint(equalTo: view.leadingAnchor),
            backgroundImageView.trailingAnchor.constraint(equalTo: view.trailingAnchor),
            backgroundImageView.bottomAnchor.constraint(equalTo: view.bottomAnchor)])
        
        view.addSubview(upperView)
        NSLayoutConstraint.activate([
            upperView.topAnchor.constraint(equalTo: view.topAnchor),
            upperView.leadingAnchor.constraint(equalTo: view.leadingAnchor),
            upperView.trailingAnchor.constraint(equalTo: view.trailingAnchor),
            upperView.heightAnchor.constraint(equalTo: view.heightAnchor, multiplier: 0.43)])
        
        upperView.addSubview(backButton)
        NSLayoutConstraint.activate([
            backButton.widthAnchor.constraint(equalToConstant: 40),
            backButton.heightAnchor.constraint(equalToConstant: 40),
            backButton.leftAnchor.constraint(equalTo: upperView.leftAnchor, constant: 6),
            backButton.topAnchor.constraint(equalTo: upperView.topAnchor, constant: 27)])
        
        upperView.addSubview(profileView)
        NSLayoutConstraint.activate([
            profileView.centerXAnchor.constraint(equalTo: upperView.centerXAnchor),
            profileView.centerYAnchor.constraint(equalTo: upperView.centerYAnchor, constant: -27),
            profileView.widthAnchor.constraint(equalToConstant: 130),
            profileView.heightAnchor.constraint(equalToConstant: 130)])
        
        profileView.addSubview(inProfileView)
        NSLayoutConstraint.activate([
            inProfileView.topAnchor.constraint(equalTo: profileView.topAnchor),
            inProfileView.bottomAnchor.constraint(equalTo: profileView.bottomAnchor),
            inProfileView.rightAnchor.constraint(equalTo: profileView.rightAnchor),
            inProfileView.leftAnchor.constraint(equalTo: profileView.leftAnchor)])
        
        
        inProfileView.addSubview(BackgroundProfileImageView)
        NSLayoutConstraint.activate([
            BackgroundProfileImageView.topAnchor.constraint(equalTo: inProfileView.topAnchor),
            BackgroundProfileImageView.bottomAnchor.constraint(equalTo: inProfileView.bottomAnchor),
            BackgroundProfileImageView.rightAnchor.constraint(equalTo: inProfileView.rightAnchor),
            BackgroundProfileImageView.leftAnchor.constraint(equalTo: inProfileView.leftAnchor)])
        
        upperView.addSubview(textBackView)
        NSLayoutConstraint.activate([
            textBackView.topAnchor.constraint(equalTo: profileView.bottomAnchor, constant: 20),
            textBackView.widthAnchor.constraint(equalTo: upperView.widthAnchor, multiplier: 0.85),
            textBackView.heightAnchor.constraint(equalTo: view.heightAnchor, multiplier: 0.7),
            textBackView.centerXAnchor.constraint(equalTo: upperView.centerXAnchor)])
        
        
        textBackView.addSubview(sectiontitleLabel)
        NSLayoutConstraint.activate([
            sectiontitleLabel.topAnchor.constraint(equalTo: textBackView.topAnchor, constant: 4),
            sectiontitleLabel.leftAnchor.constraint(equalTo: textBackView.leftAnchor, constant: 6),
            sectiontitleLabel.rightAnchor.constraint(equalTo: textBackView.rightAnchor, constant: -6),
            sectiontitleLabel.heightAnchor.constraint(equalTo: upperView.heightAnchor, multiplier: 0.14)])
        
        textBackView.addSubview(descriptionLabel)
        NSLayoutConstraint.activate([
            descriptionLabel.topAnchor.constraint(equalTo: sectiontitleLabel.bottomAnchor, constant: 4),
            descriptionLabel.leftAnchor.constraint(equalTo: textBackView.leftAnchor, constant: 6),
            descriptionLabel.rightAnchor.constraint(equalTo: textBackView.rightAnchor, constant: -6),
            descriptionLabel.heightAnchor.constraint(equalTo: textBackView.heightAnchor, multiplier: 0.8)])
    }
    
    
}
